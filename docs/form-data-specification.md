# 日田市移住定住相談フォーム データ仕様書

## 概要
本仕様書では、フォームからkintoneへ送信されるデータの項目名、データ型、取りうる値のパターンを定義します。

## データ変換方針
- **送信時の項目名**: 日本語（kintoneフィールド名に対応）
- **データ形式**: JSON
- **配列データ**: チェックボックス、動的な家族情報は配列で送信

---

## Q1. 申請者情報

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 氏（申請者） | lastName | string | ○ | 任意のテキスト | |
| 名（申請者） | firstName | string | ○ | 任意のテキスト | |
| 氏フリガナ（申請者） | lastNameKana | string | ○ | 任意のカタカナ | |
| 名フリガナ（申請者） | firstNameKana | string | ○ | 任意のカタカナ | |
| 郵便番号 | postalCode | string | ○ | 7桁の数字（ハイフンあり・なし） | 例: 877-0000 |
| 都道府県 | prefecture | string | ○ | 都道府県名 | 例: 大分県 |
| 市区町村 | city | string | ○ | 市区町村名 | 例: 日田市 |
| 番地 | address | string | ○ | 番地情報 | |
| 建物名・部屋番号 | building | string |  | 任意のテキスト | マンション名等 |
| 電話番号 | phone | string | ○ | 電話番号形式 | 例: 090-1234-5678 |
| メールアドレス | email | string |  | メール形式 | 例: example@email.com |

---

## Q2. 移住人数

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 移住人数 | immigrantCount | number | ○ | 1以上の整数 | 申請者本人を含む |

---

## Q3. 申請者本人情報

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 年齢（申請者） | applicantAge | number | ○ | 0以上の整数 | 歳 |
| 職業（申請者） | applicantOccupation | string |  | 任意のテキスト | |

---

## Q4. 家族情報（動的配列）

家族情報は配列形式で送信。各家族メンバーは以下の構造を持つオブジェクト。

| 項目名（日本語） | 現在のname属性パターン | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 氏（家族） | familyLastName{N} | string | ○ | 任意のテキスト | {N}は家族番号 |
| 名（家族） | familyFirstName{N} | string | ○ | 任意のテキスト | |
| 氏フリガナ（家族） | familyLastNameKana{N} | string | ○ | 任意のカタカナ | |
| 名フリガナ（家族） | familyFirstNameKana{N} | string | ○ | 任意のカタカナ | |
| 続柄 | familyRelationship{N} | string | ○ | 任意のテキスト | 例: 配偶者、子、親 |
| 年齢（家族） | familyAge{N} | number | ○ | 0以上の整数 | 歳 |
| 職業（家族） | familyOccupation{N} | string |  | 任意のテキスト | |

**送信形式例**:
```json
"家族情報": [
  {
    "氏": "山田",
    "名": "花子",
    "氏フリガナ": "ヤマダ",
    "名フリガナ": "ハナコ",
    "続柄": "配偶者",
    "年齢": 35,
    "職業": "会社員"
  },
  {
    "氏": "山田",
    "名": "太郎",
    "氏フリガナ": "ヤマダ",
    "名フリガナ": "タロウ",
    "続柄": "子",
    "年齢": 10,
    "職業": "小学生"
  }
]
```

---

## Q5. 出身地

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 出身都道府県 | birthPrefecture | string |  | 都道府県名 | |
| 出身市区町村 | birthCity | string |  | 市区町村名 | |

---

## Q6. 移住希望時期

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 移住希望時期 | desiredTime | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q7. 日田市を選んだ理由

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 選んだ理由 | reason | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q8. 日田市でやりたいこと

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| やりたいこと | plans | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q9. 就業形態

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 就業形態 | employmentType | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q10. 相談内容

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 相談内容 | consultation | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q11. 情報提供許可

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 郵送情報提供許可 | mailPermission | string |  | `"はい"` / `"いいえ"` | ラジオボタン |

**現在のvalue**: `yes` / `no`
**変更後**: `はい` / `いいえ`

---

## Q12. 空き家バンク同意事項（4項目すべて必須）

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 同意1_地域協調 | agreement1 | boolean | ○ | `true` / `false` | チェックボックス |
| 同意2_情報利用 | agreement2 | boolean | ○ | `true` / `false` | チェックボックス |
| 同意3_反社会的勢力排除 | agreement3 | boolean | ○ | `true` / `false` | チェックボックス |
| 同意4_要綱遵守 | agreement4 | boolean | ○ | `true` / `false` | チェックボックス |

**送信形式**: チェックされた場合のみ `true`、未チェックは `false` または送信しない

---

## Q13. 利用目的

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 利用目的 | usagePurpose | string | ○ | `"定住"` / `"別荘"` / `"二地域居住"` / `"その他"` | ラジオボタン |

**現在のvalue**: `permanent` / `villa` / `dual` / `other`
**変更後**: `定住` / `別荘` / `二地域居住` / `その他`

---

## Q14. 希望物件・希望地域

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 希望物件番号 | propertyNumber | string |  | 物件番号 | 例: №123 |
| 希望地域 | area | array |  | 配列（複数選択可） | チェックボックス |

### 希望地域の取りうる値（配列要素）

**現在のvalue** → **変更後の値**:
- `none` → `特になし`
- `north` → `市内北部（旧日田市）`
- `amase` → `天瀬地区`
- `oyama` → `大山地区`
- `maetsue` → `前津江地区`
- `nakatsue` → `中津江地区`
- `kamitsue` → `上津江地区`
- `other` → `その他`

**送信形式例**:
```json
"希望地域": ["市内北部（旧日田市）", "天瀬地区", "その他"]
```

---

## Q15. 取引種別

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 取引種別 | transactionType | string |  | `"賃貸"` / `"購入"` | ラジオボタン |

**現在のvalue**: `rent` / `purchase`
**変更後**: `賃貸` / `購入`

---

## Q16. 間取り

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 間取り希望 | layout | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q17. 駐車場

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 駐車場台数 | parkingSpaces | number |  | 0以上の整数 | 台数 |

---

## Q18-Q19. ペット情報

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| ペット有無 | hasPet | string |  | `"はい"` / `"いいえ"` | ラジオボタン |
| ペット種類 | petType | string |  | 任意のテキスト | Q18で「はい」の場合のみ |
| ペット数 | petCount | number |  | 1以上の整数 | Q18で「はい」の場合のみ |
| ペット飼育場所 | petLocation | string |  | `"屋内"` / `"屋外"` | Q18で「はい」の場合のみ |

**現在のvalue**:
- hasPet: `yes` / `no` → `はい` / `いいえ`
- petLocation: `indoor` / `outdoor` → `屋内` / `屋外`

---

## Q20. その他希望条件

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| その他希望条件 | otherConditions | string |  | 任意のテキスト（複数行） | 自由記述 |

---

## Q21. 重要視する要件（アンケート）

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 重要視する要件 | priority | array |  | 配列（複数選択可） | チェックボックス |

### 重要視する要件の取りうる値（配列要素）

**現在のvalue** → **変更後の値**:
- `location` → `場所`
- `water` → `水道`
- `building` → `建屋`
- `floors` → `階数`
- `onsen` → `温泉`
- `garden` → `菜園`
- `other` → `その他`

**送信形式例**:
```json
"重要視する要件": ["場所", "水道", "温泉"]
```

---

## Q22-Q28. アンケート詳細（条件付き表示）

これらの項目は、Q21でチェックされた項目に応じて表示されます。

### Q22. 場所

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 場所希望 | location | string |  | `"市街地"` / `"山の中"` | Q21で「場所」選択時のみ |

**現在のvalue**: `urban` / `mountain`
**変更後**: `市街地` / `山の中`

---

### Q23. 水道

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 水道種別 | water | string |  | `"市営水道"` / `"井戸水"` / `"湧水"` | Q21で「水道」選択時のみ |

**現在のvalue**: `municipal` / `well` / `spring`
**変更後**: `市営水道` / `井戸水` / `湧水`

---

### Q24. 建屋

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 建物タイプ | buildingType | string |  | `"古民家"` / `"古民家以外"` / `"別荘"` | Q21で「建屋」選択時のみ |

**現在のvalue**: `kominka` / `other` / `villa`
**変更後**: `古民家` / `古民家以外` / `別荘`

---

### Q25. 階数

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 階数希望 | floors | string |  | `"平屋"` / `"こだわらない"` | Q21で「階数」選択時のみ |

**現在のvalue**: `single` / `any`
**変更後**: `平屋` / `こだわらない`

---

### Q26. 温泉

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 温泉希望 | onsen | string |  | `"宅内にほしい"` / `"近隣"` | Q21で「温泉」選択時のみ |

**現在のvalue**: `inside` / `nearby`
**変更後**: `宅内にほしい` / `近隣`

---

### Q27. 菜園

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 菜園希望 | garden | string |  | `"必要"` / `"不要"` | Q21で「菜園」選択時のみ |

**現在のvalue**: `needed` / `notNeeded`
**変更後**: `必要` / `不要`

---

### Q28. その他（アンケート）

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| アンケートその他 | surveyOther | string |  | 任意のテキスト（複数行） | Q21で「その他」選択時のみ |

---

## Q29. 学校規模

| 項目名（日本語） | 現在のname属性 | データ型 | 必須 | 取りうる値 | 備考 |
|---|---|---|---|---|---|
| 学校規模希望 | schoolSize | string |  | `"大人数"` / `"少人数"` / `"中規模"` / `"こだわらない"` / `"その他"` | ラジオボタン |

**現在のvalue**: `large` / `small` / `medium` / `any` / `other`
**変更後**: `大人数` / `少人数` / `中規模` / `こだわらない` / `その他`

---

## 送信データ全体の構造例（JSON）

```json
{
  "氏（申請者）": "山田",
  "名（申請者）": "太郎",
  "氏フリガナ（申請者）": "ヤマダ",
  "名フリガナ（申請者）": "タロウ",
  "郵便番号": "877-0000",
  "都道府県": "大分県",
  "市区町村": "日田市",
  "番地": "1-2-3",
  "建物名・部屋番号": "",
  "電話番号": "090-1234-5678",
  "メールアドレス": "example@example.com",
  "移住人数": 3,
  "年齢（申請者）": 40,
  "職業（申請者）": "会社員",
  "家族情報": [
    {
      "氏": "山田",
      "名": "花子",
      "氏フリガナ": "ヤマダ",
      "名フリガナ": "ハナコ",
      "続柄": "配偶者",
      "年齢": 35,
      "職業": "会社員"
    },
    {
      "氏": "山田",
      "名": "次郎",
      "氏フリガナ": "ヤマダ",
      "名フリガナ": "ジロウ",
      "続柄": "子",
      "年齢": 10,
      "職業": "小学生"
    }
  ],
  "出身都道府県": "福岡県",
  "出身市区町村": "福岡市",
  "移住希望時期": "来年の春頃",
  "選んだ理由": "自然豊かで子育てに良い環境だから",
  "やりたいこと": "農業と地域活動",
  "就業形態": "リモートワーク",
  "相談内容": "住居と仕事について",
  "郵送情報提供許可": "はい",
  "同意1_地域協調": true,
  "同意2_情報利用": true,
  "同意3_反社会的勢力排除": true,
  "同意4_要綱遵守": true,
  "利用目的": "定住",
  "希望物件番号": "",
  "希望地域": ["市内北部（旧日田市）", "天瀬地区"],
  "取引種別": "購入",
  "間取り希望": "3LDK以上",
  "駐車場台数": 2,
  "ペット有無": "はい",
  "ペット種類": "犬",
  "ペット数": 1,
  "ペット飼育場所": "屋内",
  "その他希望条件": "庭付きが希望です",
  "重要視する要件": ["場所", "水道", "温泉"],
  "場所希望": "市街地",
  "水道種別": "市営水道",
  "温泉希望": "近隣",
  "学校規模希望": "少人数"
}
```

---

## 実装時の注意点

1. **配列データの処理**:
   - チェックボックス（`area`, `priority`）は配列として送信
   - FormDataから配列を正しく取得するロジックが必要

2. **条件付きフィールド**:
   - ペット詳細（Q19）はQ18が「はい」の場合のみ送信
   - アンケート詳細（Q22-Q28）はQ21で対応項目が選択された場合のみ送信

3. **家族情報の動的処理**:
   - `familyLastName1`, `familyFirstName1` のような連番データを配列に変換
   - kintoneのサブテーブルまたは関連レコードに対応

4. **必須チェック**:
   - 空き家バンク同意事項（Q12）の4項目は全てチェック必須
   - HTMLのrequired属性とJavaScriptでの二重チェック推奨

5. **データ型変換**:
   - number型: `immigrantCount`, `applicantAge`, `familyAge`, `parkingSpaces`, `petCount`
   - boolean型: `agreement1-4`（チェックボックス）
   - string型: その他全て

6. **kintoneフィールド設定**:
   - 日本語項目名に対応するkintoneフィールドコードを設定
   - 配列データはチェックボックスフィールドまたはJSON文字列で保存

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|---|---|---|
| 2025-10-02 | 1.0 | 初版作成 |
